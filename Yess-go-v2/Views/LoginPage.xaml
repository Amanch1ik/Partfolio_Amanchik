<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="YessGoFront.Views.LoginPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:converters="clr-namespace:YessGoFront.Converters"
    xmlns:components="clr-namespace:YessGoFront.Components"
    Title="Ð’Ñ…Ð¾Ð´"
    BackgroundColor="#007A51"
    Shell.NavBarIsVisible="False">
    
    <ContentPage.Resources>
        <converters:InverseBoolConverter x:Key="InvertedBoolConverter"/>
    </ContentPage.Resources>

	<Grid RowDefinitions="Auto,*,Auto" Padding="24" RowSpacing="16">
		<!-- Ð¤Ð¾Ð½ Ñ Ð³Ñ€Ð°Ð´Ð¸ÐµÐ½Ñ‚Ð¾Ð¼ -->
		<Grid.Background>
			<LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
				<GradientStop Color="#007A51" Offset="0.0"/>
				<GradientStop Color="#00C97B" Offset="1.0"/>
			</LinearGradientBrush>
		</Grid.Background>

		<!-- ÐšÐ°Ñ€Ñ‚Ð¾Ñ‡ÐºÐ° -->
		<Frame Grid.Row="1" Padding="20" CornerRadius="24" HasShadow="True" BackgroundColor="White">
			<VerticalStackLayout Spacing="16">

				<!-- Ð’ÐºÐ»Ð°Ð´ÐºÐ¸ (Ð’Ñ…Ð¾Ð´ / Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ) -->
				<Grid ColumnDefinitions="Auto,Auto" ColumnSpacing="16" Margin="0,0,0,8">
					<Label Text="Ð’Ñ…Ð¾Ð´" FontAttributes="Bold" TextColor="#0B4A3B"/>
					<Label Grid.Column="1" Text="Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ" TextColor="#B0B0B0">
						<Label.GestureRecognizers>
							<TapGestureRecognizer Tapped="OpenRegister_Tapped"/>
						</Label.GestureRecognizers>
					</Label>
				</Grid>

				<!-- ÐŸÐ¾Ð»Ðµ Ð¢ÐµÐ»ÐµÑ„Ð¾Ð½ -->
				<components:PhoneEntry x:Name="PhoneEntryControl"
                                       FullPhoneNumber="{Binding Phone, Mode=TwoWay}" />

				<!-- ÐŸÐ¾Ð»Ðµ ÐŸÐ°Ñ€Ð¾Ð»ÑŒ -->
				<Border BackgroundColor="#E0EFE9" Stroke="Transparent" StrokeShape="RoundRectangle 16" HeightRequest="52">
					<Grid Padding="12,0" ColumnDefinitions="*,Auto">
						<Entry x:Name="PasswordEntry" 
                                Placeholder="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ" 
                                IsPassword="True" 
                                BackgroundColor="Transparent"
                                Text="{Binding Password, Mode=TwoWay}" />
						<Label Grid.Column="1" 
                               Text="ðŸ‘" 
                               FontSize="20" 
                               VerticalOptions="Center" 
                               HorizontalOptions="Center"
                               Padding="8,0"
                               TextColor="#666666">
							<Label.GestureRecognizers>
								<TapGestureRecognizer Tapped="TogglePassword_Tapped"/>
							</Label.GestureRecognizers>
						</Label>
					</Grid>
				</Border>

				<!-- Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ðµ Ð¾Ð± Ð¾ÑˆÐ¸Ð±ÐºÐµ -->
				<Label Text="{Binding ErrorMessage}" 
                       IsVisible="{Binding HasError}"
                       TextColor="#D32F2F" 
                       FontSize="12"
                       Margin="0,-8,0,0"/>

				<!-- Ð—Ð°Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑŒ Ð¼ÐµÐ½Ñ -->
				<HorizontalStackLayout Spacing="8">
					<CheckBox x:Name="RememberCheck" Color="#007A51" IsChecked="{Binding RememberMe}"/>
                    <Label Text="Ð—Ð°Ð¿Ð¾Ð¼Ð½Ð¸Ñ‚ÑŒ Ð¼ÐµÐ½Ñ" TextColor="#B0B0B0" VerticalOptions="Center"/>
				</HorizontalStackLayout>

				<!-- ÐšÐ½Ð¾Ð¿ÐºÐ° Ð²Ñ…Ð¾Ð´Ð° -->
				<Grid HeightRequest="52">
					<Button Text="Ð’Ð¾Ð¹Ñ‚Ð¸"
                            HeightRequest="52"
                            CornerRadius="16"
                            BackgroundColor="#0B4A3B"
                            TextColor="White"
                            Command="{Binding LoginCommand}"
                            IsEnabled="{Binding IsBusy, Converter={StaticResource InvertedBoolConverter}}">
						<Button.Triggers>
							<DataTrigger TargetType="Button" Binding="{Binding IsBusy}" Value="True">
								<Setter Property="Text" Value="Ð’Ñ…Ð¾Ð´..." />
								<Setter Property="Opacity" Value="0.7" />
							</DataTrigger>
						</Button.Triggers>
					</Button>
					<ActivityIndicator IsRunning="{Binding IsBusy}" 
                                      IsVisible="{Binding IsBusy}"
                                      Color="White"
                                      VerticalOptions="Center"
                                      HorizontalOptions="Center" />
				</Grid>

                <Label Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚"
					TextColor="#0B4A3B"
					FontSize="16"
					TextDecorations="Underline"
					HorizontalOptions="Center">
                    <Label.GestureRecognizers>
                        <TapGestureRecognizer Tapped="OnRegistrationPage" />
                    </Label.GestureRecognizers>
                </Label>


                <BoxView HeightRequest="1" Color="#E0E0E0" Margin="0,8"/>

                


                <Label Text="Ð—Ð°Ð±Ñ‹Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ?" HorizontalOptions="Center" TextColor="#0B4A3B" />

				<!-- Ð’Ñ…Ð¾Ð´ Ñ‡ÐµÑ€ÐµÐ· Google -->
				<Button Text="Ð’Ð¾Ð¹Ñ‚Ð¸ Ñ Ð¿Ð¾Ð¼Ð¾Ñ‰ÑŒÑŽ Google"
                        HeightRequest="48"
                        CornerRadius="12"
                        BackgroundColor="White"
                        TextColor="Black"/>
			</VerticalStackLayout>
		</Frame>
	</Grid>
</ContentPage>
