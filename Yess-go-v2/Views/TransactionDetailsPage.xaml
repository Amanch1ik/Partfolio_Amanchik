<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    x:Class="YessGoFront.Views.TransactionDetailsPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    xmlns:viewmodels="clr-namespace:YessGoFront.ViewModels"
    xmlns:models="clr-namespace:YessGoFront.Models"
    x:DataType="viewmodels:TransactionDetailsViewModel"
    Shell.NavBarIsVisible="False"
    BackgroundColor="#F4F6F8">

    <Grid RowDefinitions="Auto,*,Auto">
        <!-- Header -->
        <Grid Grid.Row="0" Padding="16,44,16,8" BackgroundColor="#0F6B53">
            <Grid ColumnDefinitions="Auto,*,Auto" VerticalOptions="Center">
                <Button Text="←"
                        WidthRequest="40" HeightRequest="40"
                        CornerRadius="20"
                        BackgroundColor="#FFFFFF22"
                        TextColor="White"
                        Clicked="OnBackClicked"/>

                <Label Grid.Column="1"
                       Text="Детали операции"
                       HorizontalOptions="Center"
                       VerticalOptions="Center"
                       TextColor="White"
                       FontAttributes="Bold"
                       FontSize="18"/>
            </Grid>
        </Grid>

        <!-- Content -->
        <ScrollView Grid.Row="1" Padding="16,12,16,12">
            <VerticalStackLayout Spacing="12">
                <Frame CornerRadius="16" Padding="16" BackgroundColor="White">
                    <VerticalStackLayout Spacing="8">
                        <Label Text="{Binding Transaction.Amount, StringFormat='{0:0.##} Yess!Coin'}"
                               FontSize="26"
                               FontAttributes="Bold"
                               TextColor="#0F6B53"/>
                        <Label Text="{Binding Transaction.TypeLabel}"
                               FontSize="14"
                               TextColor="#6B7280"/>
                        <Label Text="{Binding Transaction.StatusLabel}"
                               FontSize="14"
                               TextColor="#6B7280"/>
                    </VerticalStackLayout>
                </Frame>

                <Frame CornerRadius="16" Padding="16" BackgroundColor="White">
                    <VerticalStackLayout Spacing="4">
                        <Label Text="Информация"
                               FontSize="14"
                               FontAttributes="Bold"
                               TextColor="#111827"/>
                        <Label Text="{Binding Transaction.CreatedAt, StringFormat='Создано: {0:dd.MM.yyyy HH:mm}'}" FontSize="13" TextColor="#4B5563"/>
                        <Label Text="{Binding Transaction.CompletedAt, StringFormat='Завершено: {0:dd.MM.yyyy HH:mm}'}" FontSize="13" TextColor="#4B5563"/>
                        <Label Text="{Binding Transaction.BalanceBefore, StringFormat='Баланс до: {0:0.##}'}" FontSize="13" TextColor="#4B5563"/>
                        <Label Text="{Binding Transaction.BalanceAfter, StringFormat='Баланс после: {0:0.##}'}" FontSize="13" TextColor="#4B5563"/>
                    </VerticalStackLayout>
                </Frame>

                <Frame CornerRadius="16" Padding="16" BackgroundColor="White">
                    <VerticalStackLayout Spacing="4">
                        <Label Text="Партнёр" FontSize="14" FontAttributes="Bold" TextColor="#111827"/>
                        <Label Text="{Binding Partner.Name}" FontSize="13" TextColor="#4B5563"/>
                        <Label Text="{Binding Partner.Address}" FontSize="13" TextColor="#4B5563"/>
                    </VerticalStackLayout>
                </Frame>
            </VerticalStackLayout>
        </ScrollView>

        <!-- Actions -->
        <Grid Grid.Row="2" Padding="16,8,16,18">
            <Button Text="Повторить операцию"
                    HeightRequest="52"
                    CornerRadius="26"
                    FontAttributes="Bold"
                    BackgroundColor="#0B4A3B"
                    TextColor="White"
                    Command="{Binding RepeatCommand}"/>
        </Grid>
    </Grid>
</ContentPage>
